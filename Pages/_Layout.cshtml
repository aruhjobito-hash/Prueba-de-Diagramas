@using Microsoft.AspNetCore.Components.Web
@namespace LeonXIIICore.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers


<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <base href="~/" />
    <link href="LeonXIIICore.styles.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/apps/css/todo-2.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/plugins/jquery-multi-select/css/multi-select.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="/assets/layouts/layout2/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/layouts/layout2/css/custom.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <link href="~/Global.css" rel="stylesheet" />

    <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />
</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid">

    <header>
        <TopBar />
    </header>

    <main>
        @RenderBody()  <!-- This will render the content of each page -->
        <!-- This is where we will embed the Angular app -->
        <div id="angular-app-container" class="angular-frame-class" style="max-height: inherit !important;"></div>
    </main>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="~/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js" type="text/javascript"></script>
    <script src="assets/global/scripts/app.min.js" type="text/javascript"></script>
    <script src="assets/apps/scripts/todo-2.min.js" type="text/javascript"></script>
    <script src="assets/pages/scripts/components-date-time-pickers.min.js" type="text/javascript"></script>
    <script src="assets/layouts/layout2/scripts/layout.min.js" type="text/javascript"></script>
    <script src="assets/layouts/layout2/scripts/demo.min.js" type="text/javascript"></script>
    <script src="assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/backstretch/jquery.backstretch.min.js" type="text/javascript"></script>
    <script src="assets/pages/scripts/login-5.min.js" type="text/javascript"></script>
    <script src="/assets/global/scripts/datatable.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
    <script src="/assets/pages/scripts/table-datatables-buttons.min.js" type="text/javascript"></script>

    <script src="~/assets/pages/scripts/ui-modals.min.js" type="text/javascript"></script>
    
    <script>
        window.addEventListener('error', function (e) {
            if (e && e.target && e.target.tagName === 'SCRIPT' && e.target.src.endsWith('.js.map')) {
                // Evita que el error se propague
                e.preventDefault();
                return false;
            }
        }, true);
    </script>


@*

    <link rel="stylesheet" href="angular/styles-PUDGH77K.css" />
    <script type="module" src="angular/polyfills-FFHMD2TL.js"></script>
    <script src="angular/scripts-QYHR5MO2.js" defer></script>
    <script type="module" src="angular/main-MNZMCC6A.js"></script>
    <!-- Cargar el script de Blazor al final -->
    <!-- First load Blazor's script -->
    @* <script src="LoadCSSAng.js"></script> *@
    <script src="_framework/blazor.server.js"></script>

    <!-- Ensure Angular app's script is loaded -->
       
    <script>
    // Solo ejecuta si la ruta contiene '/angular/'
    if (window.location.pathname.includes('/angular/')) {
        // Dinámicamente carga las dependencias de Angular
        const loadScript = (src, type = 'text/javascript') => {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.type = type;
                script.onload = resolve;
                script.onerror = reject;
                document.body.appendChild(script);
            });
        };

        // Función para introducir un retardo (5 segundos)
        const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // Carga los scripts de Angular en orden
        async function loadAngularApp() {
            try {
                await delay(5000);

                await loadScript('/angular/polyfills-FFHMD2TL.js', 'module');
                await loadScript('/angular/chunk-FDXKQCMH.js', 'module');
                await loadScript('/angular/chunk-PB2PJXQS.js', 'module');
                await loadScript('/angular/scripts-QYHR5MO2.js', 'text/javascript');
                await loadScript('/angular/styles-7QX4s427.css', 'text/javascript');
                await loadScript('/angular/main-4G2DZ727.js', 'module');

                if (window.platformBrowserDynamic) {
                    platformBrowserDynamic().bootstrapModule(AppModule)
                        .catch(err => console.error('Angular bootstrap failed', err));
                } else {
                    console.error('platformBrowserDynamic not found!');
                }
            } catch (err) {
                console.error('Error loading Angular app scripts:', err);
            }
        }

        window.onload = loadAngularApp;
    }
</script>


   @* <script>
        // Ensure Angular's main script is loaded before Blazor initializes
        const script = document.createElement('script');
        script.src = "/angular/main-R4IV3GRB.js";  // Path to the Angular main JS file
        script.type = 'module';
        script.onload = function () {
            platformBrowserDynamic().bootstrapModule(AppModule)
                .catch(err => console.error(err));
        };

        document.body.appendChild(script);
    </script>*@
</body>
</html>
